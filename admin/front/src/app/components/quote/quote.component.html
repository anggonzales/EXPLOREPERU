<!-- Page Wrapper -->
<div id="wrapper" [ng2-loading]="show" [config]="loadingConfig" [template]="customTemplate">
    <app-sidebar></app-sidebar>
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
            <!-- Topbar -->
            <app-topbar></app-topbar>
            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid">
                <div class="modal-body">
                    <form [formGroup]="formQuotation" (ngSubmit)="updateQuotation()">
                        <div class="row">
                            <div class="col-xl-6">
                                <div class="card">
                                    <div class="card-header">Cotización cliente</div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-xl-2">
                                                <div class="form-group">
                                                    <img [src]="productImage" width="100" height="100" />
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Producto</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="nameProduct" readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Cantidad estimada</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="estimateAmount" readonly>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Precio</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="price" readonly>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Términos de pago</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="paymentTerms" readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Fecha de Entrega</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="shippingDate" readonly>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>País</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="destiny" readonly>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Estado</label>
                                                    <input class="form-control" type="text" placeholder=""
                                                        formControlName="status" readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Nombre cliente</label>
                                                    <input class="form-control" type="text" formControlName="nameClient"
                                                        #name readonly>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Correo electrónico</label>
                                                    <input class="form-control" type="text"
                                                        formControlName="emailClient" #email readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Mensaje</label>
                                            <textarea class="form-control" rows="3"
                                                formControlName="messageUserBuyer"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div class="card-header">Responder Cotización</div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col">
                                                <div class="form-group">
                                                    <label>Mensaje</label>
                                                    <textarea class="form-control" rows="9"
                                                        formControlName="messageUserSeller"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer mt-5">
                            <button *ngIf="quotationState === 'Respondido'" type="submit" class="btn btn-success"
                                disabled>Aceptar</button>
                                
                            <button *ngIf="quotationState === 'Por atender'" type="button" class="btn btn-success"
                                mwlConfirmationPopover [popoverTitle]="popoverTitle" [popoverMessage]="popoverMessage"
                                [confirmText]="confirmText" [cancelText]="cancelText" placement="top"
                                (confirm)="updateQuotation()"
                                (cancel)="cancelQuotation()">Aceptar</button>

                            <button *ngIf="quotationState === 'Respondido'" type="button" class="btn btn-danger"
                                disabled>Rechazar</button>

                            <button *ngIf="quotationState === 'Por atender'" type="button"
                                class="btn btn-danger">Rechazar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #customTemplate>
    <div class="align-items-center d-flex flex-column flex-direction">
        <p>Cargando ...</p>
        <div class="custom-loader"></div>
    </div>
</ng-template>